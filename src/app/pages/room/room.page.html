<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="onClickLeaveButton()">
        <ion-icon name="arrow-round-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>
      <ion-spinner *ngIf=" ! philgo.currentRoom "></ion-spinner>
      <ng-container *ngIf=" philgo.currentRoom?.name ">
        {{ philgo.currentRoom?.name }}
      </ng-container>
      <ion-badge *ngIf=" philgo.currentRoom?.name " color="danger">{{ philgo.currentRoom?.no_of_member }}</ion-badge>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="presentRoomOptions()">
        <ion-icon name="settings"></ion-icon>
      </ion-button>
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <app-chat-room-messages-component #messages (error)=" onChatMessageDisplayError( $event ) "></app-chat-room-messages-component>
<!-- 
  <ion-scroll color="light" #ionScroll padding>
    <div class="messages" *ngIf=" messages.length ">
      <div class="message" *ngFor=" let message of messages " [ngClass]="{ file: message.url }">
        <ng-container *ngIf=" message.type != 'sending-file' ">

          <div class="other" text-left *ngIf="message.idx_member != philgo.myIdx(); ">
            <div class="photo" *ngIf=" message.photoUrl ">
              <ion-thumbnail>
                <img src="{{ message.photoUrl }}">
              </ion-thumbnail>
            </div>
            <div class="text">
              <div class="meta">
                <span class="name">{{message.name}}</span>
                <span class="date fs-sm">{{message.stamp | date:'short'}}</span>
              </div>
              <div class="content">
                <ion-spinner *ngIf=" ! message.idx "></ion-spinner>
                <div class="text" [innerHTML]="message.message" *ngIf="message.message"></div>
                <app-show-file *ngIf="message.url" [message]="message" (load)=" scroll() "></app-show-file>
              </div>
            </div>
          </div>

          <div class="my" text-right *ngIf="message.idx_member == philgo.myIdx(); ">
            <div class="container">
              <div class="content">

                <ion-spinner name="bubbles" *ngIf=" ! message.idx "></ion-spinner>
                <div class="text" [innerHTML]="message.message" *ngIf="message.message"></div>
                <app-show-file *ngIf="message.url" [message]="message" (load)=" scroll() "></app-show-file>

                <div class="fs-sm" *ngIf=" message['percentage'] ">{{ message['percentage'] }}%</div>
              </div>
            </div>
          </div>
        </ng-container>
        <app-send-file text-right *ngIf=" message.type == 'sending-file' " [message]="message"></app-send-file>
      </div>
    </div>
  </ion-scroll> -->
</ion-content>


<ion-footer>
  <app-chat-room-input-component
    (send)=" messages.sendNewMessage( $event ) "
    (removeMessageByRetvar)=" messages.removeMessageByRetvar( $event ) "
  ></app-chat-room-input-component>

  <!-- <ion-toolbar>
    <label for="filebox" slot="start" (click)=" onClickFile($event) ">
      <ion-buttons>
        <ion-icon slot="icon-only" class="camera" name="camera"></ion-icon>
      </ion-buttons>
    </label>
    <input id="filebox" class="filebox" type="file" name="file" (change)="onChangeFile($event)" *ngIf=" a.platform == 'web' ">
    <ion-input type="text" placeholder="{{ a.tr.t({ko: '채팅을 입력해주세요.', en: 'Type a message'}) }}" [(ngModel)]="form.message" name="message"
      (keyup.enter)="onClickSendMessage()"></ion-input>
    <ion-buttons slot="end" (click)="onClickSendMessage()">
      <ion-button color="tertiary">
        <ion-icon slot="icon-only" name="paper-plane"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar> -->
</ion-footer>