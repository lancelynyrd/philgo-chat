<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button routerLink="/">
        <ion-icon name="arrow-round-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>
      <ion-spinner *ngIf=" ! roomInfo.name "></ion-spinner>
      <div *ngIf=" roomInfo.name ">{{ roomInfo.name }}</div>
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="presentActionSheet()">
        <ion-icon name="settings"></ion-icon>
      </ion-button>
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <ion-scroll #ionScroll>
    <div class="messages" *ngIf=" messages.length ">
      <div class="message p-2" *ngFor=" let message of messages ">

        <div class="other" text-left *ngIf="message.idx_member != philgo.myIdx(); ">
          <div class="">
            <div class="photo" *ngIf=" message.photoUrl ">
              <img src="{{ message.photoUrl }}">
            </div>
            <div class="text">
              <span class="name">{{message.name}}</span>
              <span class="date fs-xl">{{message.stamp | date:'short'}}</span>
              <p text-wrap>{{message.message}}</p>
            </div>
          </div>
        </div>

        <div class="my" text-right *ngIf="message.idx_member == philgo.myIdx(); ">
          <!-- <span class="name">Me</span>
            <span class="date fs-xl">{{ message.stamp | date:'short'}}</span> -->
          <!-- {{ message.idx }} -->
          <ion-spinner *ngIf=" ! message.idx "></ion-spinner>
          <div text-wrap>{{message.message}}</div>
        </div>

      </div>
    </div>
  </ion-scroll>
</ion-content>

<ion-footer>
  <ion-grid no-padding>
    <ion-row>
      <ion-col size="10">
        <ion-input type="text" placeholder="Type a message" [(ngModel)]="form.message" name="message" (keyup.enter)="onClickSendMessage()"></ion-input>
      </ion-col>
      <ion-col class="send-button" size="2" (click)="onClickSendMessage()">
        <ion-icon name="paper-plane"></ion-icon>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>